# Les données dans Gatsby
Vous allez maintenant vous plonger dans la manière dont Gatsby gère les données. Une fonctionnalité puissante de Gatsby qui vous permet de créer facilement des sites à partir de Markdown, WordPress, de CMS.

Un site Web comporte quatre parties: HTML, CSS, JS et des data. Les deux premières parties du workshop se sont concentrées sur les trois premiers. Apprenons maintenant à utiliser les données dans les sites Gatsby.

## Ce qu'on enetend par "données"
Jusqu'à présent, vous avez écrit du texte et ajouté des images directement dans des composants. Ce qui est un excellent moyen de créer de nombreux sites Web. Mais parfois, vous souhaiterez stocker des données en dehors des composants, puis les importer en fonction des besoins.

Si vous construisez un site avec WordPress et Gatsby, les données du site (pages et articles) sont dans WordPress et vous les extrayez au besoin dans vos composants.

Les données peuvent également être dans des types de fichiers tels que Markdown, CSV, etc., ainsi que dans des bases de données et des API de toutes sortes.

Le "data layer" de Gatsby vous permet d'extraire des données de ces sources directement dans vos composants, sous la forme que vous souhaitez.

## Utilisation de données non structurées vs GraphQL
Si vous construisez un petit site, un moyen efficace de le créer consiste à extraire des données non structurées à l'aide de l'API `createPages`.
1. Consulez la [bibliothèque de plugins Gatsby](https://www.gatsbyjs.org/plugins/) et regarder si vous trouvez ce dont vous avez besoin.
2. Si pas, il faut envisager de créer le vôtre. Mais on ne le fera pas aujourd'hui.

## Comment le data layer de Gatsby utilise GraphQL pour extraire des données dans des composants
Il existe de nombreuses options pour charger les données dans les composants React. L’une des technologies les plus populaires et les plus puissantes est GraphQL .

GraphQL est un **q** uery **l** anguage (le QL partie de son nom). Ça fonctionne de manière similaire à SQL. En utilisant une syntaxe spéciale, vous décrivez les données que vous voulez dans votre composant, puis ces données vous sont transmises.

Gatsby utilise GraphQL pour permettre aux composants de déclarer les données dont ils ont besoin.

## Créer un nouveau site exemple
Vous allez créer un blog Markdown appelé «Les pandas mangent beaucoup». Il est dédié à montrer les meilleures images et vidéos de pandas mangeant beaucoup. Vous plongerez dans les bases de GraphQL et de Gatsby Markdown.

Ouvrez une nouvelle fenêtre de terminal et exécutez les commandes suivantes pour créer un nouveau site Gatsby dans un répertoire appelé workshop-gatsby-partie3.
```console
gatsby new workshop-gatsby-partie3 https://github.com/gatsbyjs/gatsby-starter-hello-world
cd workshop-gatsby-partie3
```
Ensuite, installez d'autres dépendances nécessaires à la racine du projet. Vous utiliserez le thème «Kirkham» de la typographie et vous essaierez une bibliothèque de CSS «Emotion» :
```console
npm install --save gatsby-plugin-typography typography react-typography typography-theme-kirkham gatsby-plugin-emotion @emotion/core
```
Configurez un site similaire à celui de la partie précédente . Ce site aura un composant de mise en page et deux composants de page:
`src / components / layout.js`
```JSX
import React from "react"
import { css } from "@emotion/core"
import { Link } from "gatsby"

import { rhythm } from "../utils/typography"

export default ({ children }) => (
  <div
    css={css`
      margin: 0 auto;
      max-width: 700px;
      padding: ${rhythm(2)};
      padding-top: ${rhythm(1.5)};
    `}
  >
    <Link to={`/`}>
      <h3
        css={css`
          margin-bottom: ${rhythm(2)};
          display: inline-block;
          font-style: normal;
        `}
      >
        Pandas Eating Lots
      </h3>
    </Link>
    <Link
      to={`/about/`}
      css={css`
        float: right;
      `}
    >
      About
    </Link>
    {children}
  </div>
)
```
`src / pages / index.js`
```JSX
import React from "react"
import Layout from "../components/layout"

export default () => (
  <Layout>
    <h1>Amazing Pandas Eating Things</h1>
    <div>
      <img
        src="https://2.bp.blogspot.com/-BMP2l6Hwvp4/TiAxeGx4CTI/AAAAAAAAD_M/XlC_mY3SoEw/s1600/panda-group-eating-bamboo.jpg"
        alt="Group of pandas eating bamboo"
      />
    </div>
    </Layout>
)
```
`src / pages / about.js`
```JSX
import React from "react"
import Layout from "../components/layout"

export default () => (
  <Layout>
    <h1>About Pandas Eating Lots</h1>
    <p>
      We're the only site running on your computer dedicated to showing the best
      photos and videos of pandas eating lots of food.
    </p>
  </Layout>
)
```
`src / utils / typography.js`
```javascript
import Typography from "typography"
import kirkhamTheme from "typography-theme-kirkham"

const typography = new Typography(kirkhamTheme)

export default typography
export const rhythm = typography.rhythm
```
`gatsby-config.js` À LA RACINE DU PROJET! PAS DANS `src`
```javascript
module.exports = {
  plugins: [
    `gatsby-plugin-emotion`,
    {
      resolve: `gatsby-plugin-typography`,
      options: {
        pathToConfigModule: `src/utils/typography`,
      },
    },
  ],
}
```
Et maintenant dans votre terminal:
```console
gatsby develop```






